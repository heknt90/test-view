(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{297:function(t,e,n){var content=n(305);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(48).default)("adb8f2e2",content,!0,{sourceMap:!1})},298:function(t,e,n){var content=n(307);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(48).default)("647fb12f",content,!0,{sourceMap:!1})},299:function(t,e,n){var content=n(309);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(48).default)("cb7f7dc2",content,!0,{sourceMap:!1})},300:function(t,e,n){var content=n(311);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(48).default)("2f17177c",content,!0,{sourceMap:!1})},301:function(t,e,n){var content=n(313);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(48).default)("187f7650",content,!0,{sourceMap:!1})},304:function(t,e,n){"use strict";var o=n(297);n.n(o).a},305:function(t,e,n){(e=n(47)(!1)).push([t.i,".tasks__item{width:400px;margin-bottom:10px;padding-top:40px;text-align:center}",""]),t.exports=e},306:function(t,e,n){"use strict";var o=n(298);n.n(o).a},307:function(t,e,n){(e=n(47)(!1)).push([t.i,".tasks__list{list-style:none;padding:0}",""]),t.exports=e},308:function(t,e,n){"use strict";var o=n(299);n.n(o).a},309:function(t,e,n){(e=n(47)(!1)).push([t.i,".comment-creator__wrap[data-v-3094ed33]{position:relative;margin-right:60px}.comment-creator__submit[data-v-3094ed33]{position:absolute;bottom:1px;right:-70px;height:33px;width:70px;padding-top:10px}",""]),t.exports=e},310:function(t,e,n){"use strict";var o=n(300);n.n(o).a},311:function(t,e,n){(e=n(47)(!1)).push([t.i,".comment__content[data-v-e9c3c898]{white-space:pre-wrap}.task-control[data-v-e9c3c898]{text-align:center}",""]),t.exports=e},312:function(t,e,n){"use strict";var o=n(301);n.n(o).a},313:function(t,e,n){(e=n(47)(!1)).push([t.i,".my-column[data-v-5413eeb5]{width:440px;padding:20px}",""]),t.exports=e},314:function(t,e,n){"use strict";n.r(e);var o={props:["task_id"],computed:{item:function(){return this.$store.getters["data/getTask"](this.task_id)}},methods:{openTask:function(t){this.$store.dispatch("ui/openTask",this.task_id)}}},r=(n(304),n(11)),c={props:["is_common","list"],components:{TaskItem:Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"task-item"},[n("el-card",{staticClass:"tasks__item"},[n("p",[t._v(t._s(t.item.contract_number)+" "),n("b",{staticClass:"contract-type"},[t._v(t._s(t.item.contract_type))]),t._v(" "+t._s(t.item.debt.toLocaleString("ru",{style:"currency",currency:"RUB",minimumFractionDigits:0,maximumFractionDigits:0})))]),t._v(" "),n("el-button-group",[n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.openTask(t.task_id)}}},[t._v("Обработать")])],1)],1)],1)}),[],!1,null,null,null).exports}},l=(n(306),Object(r.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-container",{staticClass:"container"},[n("el-header",{staticStyle:{height:"100px"}},[t.is_common?n("h2",[t._v("Доступные задачи")]):n("h2",[t._v("Отложенные вами")]),t._v(" "),n("p",[t._v("Всего: "+t._s(t.list.length))])]),t._v(" "),n("el-container",{staticStyle:{display:"flex","flex-direction":"column","align-items":"center"}},[n("ul",{staticClass:"tasks__list"},t._l(t.list,(function(t){return n("TaskItem",{key:t,attrs:{task_id:t}})})),1)])],1)}),[],!1,null,null,null).exports),m={data:function(){return{textCommment:""}},methods:{sendComment:function(){var t=this.$store.state.ui.detailsDialog.itemId;console.log(t);var e=this.$store.state.account.username,content=this.textCommment;this.$store.commit("data/addComment",{id:t,author:e,content:content}),this.textCommment=""}}};n(308);var _={components:{CreateComment:Object(r.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-card",[n("h3",[t._v("Создать комментарий")]),t._v(" "),n("form",[n("p",{staticClass:"comment-creator__wrap"},[n("el-input",{staticClass:"comment-creator__input",attrs:{type:"textarea",autosize:{minRows:1,maxRows:5}},model:{value:t.textCommment,callback:function(e){t.textCommment=e},expression:"textCommment"}}),t._v(" "),n("el-button",{staticClass:"comment-creator__submit",attrs:{type:"primary",icon:"el-icon-s-promotion"},on:{click:t.sendComment}})],1)])])}),[],!1,null,"3094ed33",null).exports},data:function(){return{collapseTitles:[]}},computed:{task_id:function(){return this.$store.state.ui.detailsDialog.itemId},taskData:function(){return this.$store.state.ui.detailsDialog.details},visible:function(){return this.$store.state.ui.detailsDialog.visible},getLocation:function(){return this.$store.getters["data/getLocationTask"](this.task_id)}},methods:{closeDetails:function(){this.$store.commit("ui/closeTask")},matchDays:function(data){return function(t){var e=new Date(Date.now()).setHours(0,0,0,0)-t,n=Date.now()-t;if(e<=0){if(n<0)return"Error";if(n/36e5>=1){var o=Math.round(n/36e5);return String(o)+" часов назад"}if(n/6e4>=1){var r=Math.round(n/6e4);return String(r)+" минут назад назад"}return n/6e4<1?"Только что":"Сегодня"}return String(Math.ceil(e/864e5))+" дней назад"}(data)},takeTask:function(){this.$store.commit("data/takeTask",this.$store.state.ui.detailsDialog.itemId),this.$store.commit("ui/closeTask")},finishTask:function(){this.$store.commit("data/finishTask",this.$store.state.ui.detailsDialog.itemId),this.$store.commit("ui/closeTask")},returnTask:function(){this.$store.commit("data/returnTask",this.$store.state.ui.detailsDialog.itemId),this.$store.commit("ui/closeTask")}}},d=(n(310),{data:function(){return{}},components:{TaskList:l,TaskDetailsDialog:Object(r.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:"Договор №"+t.taskData.contract_number,visible:t.visible,width:"600"},on:{close:function(e){return t.closeDetails()}}},[n("el-collapse",{model:{value:t.collapseTitles,callback:function(e){t.collapseTitles=e},expression:"collapseTitles"}},[n("el-collapse-item",{attrs:{title:"Информация"}},[n("p",[t._v("Тип договора: "+t._s(t.taskData.contract_type))]),t._v(" "),n("p",[t._v("ФИО: "+t._s(t.taskData.promiser.fullname))]),t._v(" "),n("p",[t._v("Пол: "+t._s(t.taskData.promiser.sex))]),t._v(" "),n("p",[t._v("Дней просрочки: "+t._s(t.taskData.delay))]),t._v(" "),n("p",[t._v("Общая задолженность: "+t._s(t.taskData.debt.toLocaleString("ru",{style:"currency",currency:"RUB",minimumFractionDigits:0,maximumFractionDigits:0})))])]),t._v(" "),n("el-collapse-item",{attrs:{title:"Контакты"}},t._l(t.taskData.promiser.contacts,(function(e,o){return n("p",{key:o,attrs:{contact:e}},[t._v("\n                "+t._s(e.tel)+" "+t._s(e.type)+" Последний звонок "+t._s(e.lastCall)+" дней назад\n            ")])})),0),t._v(" "),n("el-collapse-item",{attrs:{title:"Комментарии"}},[n("CreateComment"),t._v(" "),t._l(t.taskData.comments,(function(e,o){return n("el-card",{key:o,attrs:{comment:e}},[n("h5",[t._v(t._s(e.author)+":")]),t._v(" "),n("p",{staticClass:"comment__content"},[t._v(t._s(e.content))]),t._v(" "),n("p",[t._v(t._s(t.matchDays(e.modified)))])])}))],2)],1),t._v(" "),n("el-row",[n("el-button-group",{staticClass:"task-control"},["common"===t.getLocation?n("el-button",{attrs:{type:"warning",title:"Вернуться к обработке позже (отложить договор себе)"},on:{click:function(e){return t.takeTask()}}},[t._v("Отложить себе")]):t._e(),t._v(" "),"myself"===t.getLocation?n("el-button",{attrs:{type:"danger",title:"Действий по обработке не было, ОТМЕНА (вернуть в общую очередь)"},on:{click:function(e){return t.returnTask()}}},[t._v("Вернуть в очередь")]):t._e(),t._v(" "),n("el-button",{attrs:{type:"success",title:"Обработано. Не возвращаться к договору в ближайшее время"},on:{click:function(e){return t.finishTask()}}},[t._v("Завершить сделку")])],1)],1)],1)}),[],!1,null,"e9c3c898",null).exports},computed:{generalData:function(){return this.$store.state.data.generalData},commonIds:function(){return this.$store.state.data.commonIds},myselfIds:function(){return this.$store.state.data.myselfIds}}}),f=(n(312),Object(r.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-row",{attrs:{type:"flex",justify:"space-around"}},[t.myselfIds.length>0?n("el-col",{staticClass:"my-column"},[n("TaskList",{attrs:{is_common:!1,list:t.myselfIds}})],1):t._e(),t._v(" "),n("el-col",{staticClass:"my-column"},[n("TaskList",{attrs:{is_common:!0,list:t.commonIds}})],1),t._v(" "),t.$store.state.ui.detailsDialog.visible?n("TaskDetailsDialog"):t._e()],1)}),[],!1,null,"5413eeb5",null));e.default=f.exports}}]);